{"version":3,"sources":["../static/js/BrowseMoreHoots.51d2ce4d.chunk.js","components/IndividualHoot/BrowseMoreHoots.js"],"names":["webpackJsonp","8555","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_axios__","__WEBPACK_IMPORTED_MODULE_2_axios___default","__WEBPACK_IMPORTED_MODULE_3_react_infinite_scroll_component__","__WEBPACK_IMPORTED_MODULE_4__Post__","__WEBPACK_IMPORTED_MODULE_6__Feed_feed_css__","_this","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","TypeError","BrowseMoreHoots","hashtagsFound","iHootId","useState","uploads","setUploads","hasMore","setHasMore","page","setpage","BaseURL","process","useEffect","getAllUploadData","a","axios","get","response","data","results","fetchMoreHoots","hootsFromServer","className","dataLength","filter","upload","id","map","some","hashtag","caption","includes","hootId","username","authorUsername","mimeType","hootImgId","image","audioPoster","likes","views","followers","link","ephemeral","privateHoot","private","expiryDate","timeStamp","edited","editedTimeStamp"],"mappings":"AAAAA,cAAc,IAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAawkB,SAASC,GAAmBC,GAAK,GAAGC,MAAMC,QAAQF,GAAK,CAAC,IAAI,GAAIG,GAAE,EAAEC,EAAKH,MAAMD,EAAIK,QAAQF,EAAEH,EAAIK,OAAOF,IAAKC,EAAKD,GAAGH,EAAIG,EAAI,OAAOC,GAAW,MAAOH,OAAMK,KAAKN,GAAO,QAASO,GAAkBC,GAAI,MAAO,YAAW,GAAIC,GAAID,EAAGE,MAAMC,KAAKC,UAAW,OAAO,IAAIC,SAAQ,SAASC,EAAQC,GAAQ,QAASC,GAAKC,EAAIC,GAAK,IAAI,GAAIC,GAAKV,EAAIQ,GAAKC,GAASE,EAAMD,EAAKC,MAAO,MAAMC,GAAqB,WAAdN,GAAOM,GAAe,IAAGF,EAAKG,KAA2B,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAASH,GAAOJ,EAAK,OAAOI,IAAS,SAASI,GAAKR,EAAK,QAAQQ,IAAxHV,GAAQM,GAA0H,MAAOJ,GAAK,WAZrnCS,OAAOC,eAAe7B,EAAqB,cAAgBuB,OAAO,GAC7C,IAAIO,GAA0D7B,EAAoB,IAC9E8B,EAAkE9B,EAAoB+B,EAAEF,GACxFG,EAAsChC,EAAoB,GAC1DiC,EAA8CjC,EAAoB+B,EAAEC,GACpEE,EAAsClC,EAAoB,IAC1DmC,EAA8CnC,EAAoB+B,EAAEG,GACpEE,EAAgEpC,EAAoB,KACpFqC,EAAsCrC,EAAoB,KAE1DsC,GAD2DtC,EAAoB,KAChCA,EAAoB,MAExFuC,GAD4EvC,EAAoB+B,EAAEO,GAC5FzB,MAAS2B,EAAe,WAAW,QAASC,GAAcvC,EAAIG,GAAG,GAAIqC,MAAYC,GAAG,EAASC,GAAG,EAAUC,MAAGC,EAAU,KAAI,IAAI,GAA8BC,GAA1BC,EAAG9C,EAAI+C,OAAOC,cAAiBP,GAAII,EAAGC,EAAGG,QAAQ3B,QAAekB,EAAKU,KAAKL,EAAGzB,QAAUjB,GAAGqC,EAAKnC,SAASF,GAAjDsC,GAAG,IAAwD,MAAMjB,GAAKkB,GAAG,EAAKC,EAAGnB,EAAK,QAAQ,KAAQiB,GAAIK,EAAW,QAAEA,EAAW,SAAK,QAAQ,GAAGJ,EAAG,KAAMC,IAAK,MAAOH,GAAM,MAAO,UAASxC,EAAIG,GAAG,GAAGF,MAAMC,QAAQF,GAAM,MAAOA,EAAU,IAAG+C,OAAOC,WAAYvB,QAAOzB,GAAM,MAAOuC,GAAcvC,EAAIG,EAAS,MAAM,IAAIgD,WAAU,4DCXngBC,EAAkB,SAAC,GAAgC,GAA9BC,GAA6B,EAA7BA,cAAeC,EAAc,EAAdA,QAAc,EACtBC,uBADsB,SAC7CC,EAD6C,KACpCC,EADoC,OAEtBF,oBAAS,GAFa,SAE7CG,EAF6C,KAEpCC,EAFoC,OAG5BJ,mBAAS,GAHmB,SAG7CK,EAH6C,KAGvCC,EAHuC,KAI9CC,EAAUC,iCAIhBC,qBAAU,YACAC,4BAAmB,sBAAAC,EAAA,qEACfC,IAAMC,IAAON,EAAb,oCAA8DvC,KAAK,SAAC8C,GACtEZ,EAAWY,EAASC,KAAKC,UAFR,2CAAnB,4DAQV,IAAMC,+BAAiB,sBAAAN,EAAA,qEACbC,IAAMC,IAAON,EAAb,yBAA6CF,EAA7C,aACDrC,KAAK,SAAC8C,GACH,GAAMI,GAAkBJ,EAASC,KAAKC,OAEtCd,eAAeD,GAAf,EAA2BiB,MAEH,IAApBA,GAAyBA,EAlB3B,KAmBEd,GAAW,IARJ,QAYnBE,EAAQD,EAAO,EAZI,2CAAjB,qDAeN,OACI,0BAAKc,UAAU,QAEVlB,GACG,kBAAC,KACGmB,WAAYnB,EAAQnD,OACpB4C,KAAMuB,EACNd,QAASA,GAGRF,EAAQoB,OAAO,SAAAC,GAAA,MAAUA,GAAOC,KAAOxB,IAASyB,IAAI,SAACF,GAClD,MAAQ,0BAAK5D,IAAK4D,EAAOC,IACnBzB,EAAc2B,KAAK,SAAAC,GAAA,MAAYJ,GAAOK,QAASC,SAASF,KACpD,kBAAC,KACCG,OAAQP,EAAOC,GACfO,SAAUR,EAAOS,eACjBC,SAAUV,EAAOU,SACjBC,UAAWX,EAAOY,MAClBC,YAAab,EAAOa,YACpBC,MAAOd,EAAOc,MACdC,MAAOf,EAAOe,MACdC,UAAWhB,EAAOgB,UAClBX,QAASL,EAAOK,QAChBY,KAAMjB,EAAOiB,KACbC,UAAWlB,EAAOkB,UAClBC,YAAanB,EAAOoB,QACpBC,WAAYrB,EAAOqB,WACnBC,UAAWtB,EAAOsB,UAClBC,OAAQvB,EAAOuB,OACfC,gBAAiBxB,EAAOwB,kBAE1B,UAUnBjD","file":"static/js/BrowseMoreHoots.51d2ce4d.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 8555:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_infinite_scroll_component__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Post__ = __webpack_require__(224);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Feed_InfiniteScrollLoader__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Feed_feed_css__ = __webpack_require__(724);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Feed_feed_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__Feed_feed_css__);\nvar _this=this;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var BrowseMoreHoots=function BrowseMoreHoots(_ref){var hashtagsFound=_ref.hashtagsFound,iHootId=_ref.iHootId;var _useState=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])([]),_useState2=_slicedToArray(_useState,2),uploads=_useState2[0],setUploads=_useState2[1];var _useState3=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(true),_useState4=_slicedToArray(_useState3,2),hasMore=_useState4[0],setHasMore=_useState4[1];var _useState5=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var BaseURL=\"https://soapboxapi.megahoot.net\";var LIMIT=10;Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useEffect\"])(function(){var getAllUploadData=function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+'/upload/public/p?page=1&limit='+LIMIT).then(function(response){setUploads(response.data.results);});case 2:case'end':return _context.stop();}}},_callee,_this);}));return function getAllUploadData(){return _ref2.apply(this,arguments);};}();getAllUploadData();},[]);var fetchMoreHoots=function(){var _ref3=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+'/upload/public/p?page='+page+'&limit='+LIMIT).then(function(response){var hootsFromServer=response.data.results;setUploads([].concat(_toConsumableArray(uploads),_toConsumableArray(hootsFromServer)));if(hootsFromServer===0||hootsFromServer<LIMIT){setHasMore(false);}});case 2:setpage(page+1);case 3:case'end':return _context2.stop();}}},_callee2,_this);}));return function fetchMoreHoots(){return _ref3.apply(this,arguments);};}();return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'feed'},uploads&&__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_react_infinite_scroll_component__[\"a\" /* default */],{dataLength:uploads.length,next:fetchMoreHoots,hasMore:hasMore// loader={<InfiniteScrollLoader />}\n},uploads.filter(function(upload){return upload.id!==iHootId;}).map(function(upload){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{key:upload.id},hashtagsFound.some(function(hashtag){return upload.caption.includes(hashtag);})?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__Post__[\"a\" /* default */],{hootId:upload.id,username:upload.authorUsername,mimeType:upload.mimeType,hootImgId:upload.image,audioPoster:upload.audioPoster,likes:upload.likes,views:upload.views,followers:upload.followers,caption:upload.caption,link:upload.link,ephemeral:upload.ephemeral,privateHoot:upload.private,expiryDate:upload.expiryDate,timeStamp:upload.timeStamp,edited:upload.edited,editedTimeStamp:upload.editedTimeStamp}):null);})));};/* harmony default export */ __webpack_exports__[\"default\"] = (BrowseMoreHoots);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/BrowseMoreHoots.51d2ce4d.chunk.js","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport Post from '../Post'\r\nimport InfiniteScrollLoader from '../Feed/InfiniteScrollLoader';\r\nimport '../Feed/feed.css'\r\n\r\nconst BrowseMoreHoots = ({ hashtagsFound, iHootId }) => {\r\n    const [uploads, setUploads] = useState([]);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [page, setpage] = useState(2);\r\n    const BaseURL = process.env.REACT_APP_API_URL;\r\n\r\n    const LIMIT = 10;\r\n\r\n    useEffect(() => {\r\n        const getAllUploadData = async () => {\r\n            await axios.get(`${BaseURL}/upload/public/p?page=1&limit=${LIMIT}`).then((response) => {\r\n                setUploads(response.data.results);\r\n            });\r\n        }\r\n        getAllUploadData();\r\n    }, [])\r\n\r\n    const fetchMoreHoots = async () => {\r\n        await axios.get(`${BaseURL}/upload/public/p?page=${page}&limit=${LIMIT}`)\r\n            .then((response) => {\r\n                const hootsFromServer = response.data.results;\r\n\r\n                setUploads([...uploads, ...hootsFromServer]);\r\n\r\n                if (hootsFromServer === 0 || hootsFromServer < LIMIT) {\r\n                    setHasMore(false);\r\n                }\r\n            });\r\n\r\n        setpage(page + 1);\r\n    }\r\n\r\n    return (\r\n        <div className=\"feed\">\r\n            {/* no need to reverse the list as it is getting reversed from the server itself  */}\r\n            {uploads &&\r\n                <InfiniteScroll\r\n                    dataLength={uploads.length}\r\n                    next={fetchMoreHoots}\r\n                    hasMore={hasMore}\r\n                // loader={<InfiniteScrollLoader />}\r\n                >\r\n                    {uploads.filter(upload => upload.id !== iHootId).map((upload) => {\r\n                        return (<div key={upload.id}>\r\n                            {(hashtagsFound.some(hashtag => (upload.caption).includes(hashtag))\r\n                                ? <Post\r\n                                    hootId={upload.id}\r\n                                    username={upload.authorUsername}\r\n                                    mimeType={upload.mimeType}\r\n                                    hootImgId={upload.image}\r\n                                    audioPoster={upload.audioPoster}\r\n                                    likes={upload.likes}\r\n                                    views={upload.views}\r\n                                    followers={upload.followers}\r\n                                    caption={upload.caption}\r\n                                    link={upload.link}\r\n                                    ephemeral={upload.ephemeral}\r\n                                    privateHoot={upload.private}\r\n                                    expiryDate={upload.expiryDate}\r\n                                    timeStamp={upload.timeStamp}\r\n                                    edited={upload.edited}\r\n                                    editedTimeStamp={upload.editedTimeStamp}\r\n                                />\r\n                                : null\r\n                            )}\r\n                        </div>)\r\n                    })}\r\n                </InfiniteScroll>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BrowseMoreHoots\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/IndividualHoot/BrowseMoreHoots.js"],"sourceRoot":""}