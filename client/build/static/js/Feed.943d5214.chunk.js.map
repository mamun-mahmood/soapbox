{"version":3,"sources":["../static/js/Feed.943d5214.chunk.js","components/Feed/Feed.js"],"names":["webpackJsonp","8708","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_axios__","__WEBPACK_IMPORTED_MODULE_2_axios___default","__WEBPACK_IMPORTED_MODULE_3__Post__","__WEBPACK_IMPORTED_MODULE_4__EndMsg__","__WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__","__WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__","__WEBPACK_IMPORTED_MODULE_7__feed_css__","_this","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","TypeError","Feed","useState","uploads","setUploads","hasMore","setHasMore","page","setpage","BaseURL","process","useEffect","getAllUploadData","a","axios","get","response","data","results","fetchMoreHoots","hootsFromServer","className","style","width","dataLength","loader","endMessage","map","upload","id","hootId","username","authorUsername","mimeType","hootImgId","image","audioPoster","likes","views","followers","caption","link","ephemeral","privateHoot","private","expiryDate","timeStamp","edited","editedTimeStamp"],"mappings":"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","file":"static/js/Feed.943d5214.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 8708:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Post__ = __webpack_require__(238);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__EndMsg__ = __webpack_require__(773);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__ = __webpack_require__(143);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__ = __webpack_require__(239);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feed_css__ = __webpack_require__(769);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feed_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__feed_css__);\nvar _this=this;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var Feed=function Feed(){var _useState=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])([]),_useState2=_slicedToArray(_useState,2),uploads=_useState2[0],setUploads=_useState2[1];var _useState3=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(true),_useState4=_slicedToArray(_useState3,2),hasMore=_useState4[0],setHasMore=_useState4[1];var _useState5=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var BaseURL=\"https://soapboxapi.megahoot.net\";var LIMIT=10;Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useEffect\"])(function(){var getAllUploadData=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+'/upload/public/p?page=1&limit='+LIMIT).then(function(response){setUploads(response.data.results);});case 2:case'end':return _context.stop();}}},_callee,_this);}));return function getAllUploadData(){return _ref.apply(this,arguments);};}();getAllUploadData();},[]);var fetchMoreHoots=function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+'/upload/public/p?page='+page+'&limit='+LIMIT).then(function(response){var hootsFromServer=response.data.results;setUploads([].concat(_toConsumableArray(uploads),_toConsumableArray(hootsFromServer)));if(hootsFromServer===0||hootsFromServer<LIMIT){setHasMore(false);}});case 2:setpage(page+1);case 3:case'end':return _context2.stop();}}},_callee2,_this);}));return function fetchMoreHoots(){return _ref2.apply(this,arguments);};}();return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'feed start',style:{width:\"100%\"}},uploads&&__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__[\"a\" /* default */],{dataLength:uploads.length,next:fetchMoreHoots,hasMore:hasMore,loader:__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__[\"a\" /* default */],null),endMessage:__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__EndMsg__[\"a\" /* default */],null)},uploads.map(function(upload){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{key:upload.id},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__Post__[\"a\" /* default */],{hootId:upload.id,username:upload.authorUsername,mimeType:upload.mimeType,hootImgId:upload.image,audioPoster:upload.audioPoster,likes:upload.likes,views:upload.views,followers:upload.followers,caption:upload.caption,link:upload.link,ephemeral:upload.ephemeral,privateHoot:upload.private,expiryDate:upload.expiryDate,timeStamp:upload.timeStamp,edited:upload.edited,editedTimeStamp:upload.editedTimeStamp}));})));};/* harmony default export */ __webpack_exports__[\"default\"] = (Feed);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/Feed.943d5214.chunk.js","import React, { useState, useEffect, useCallback } from 'react'\r\nimport axios from 'axios'\r\nimport Post from '../Post'\r\nimport EndMsg from './EndMsg';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport InfiniteScrollLoader from './InfiniteScrollLoader';\r\nimport './feed.css'\r\n\r\nconst Feed = () => {\r\n    const [uploads, setUploads] = useState([]);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [page, setpage] = useState(2);\r\n    const BaseURL = process.env.REACT_APP_API_URL;\r\n\r\n    const LIMIT = 10;\r\n\r\n    useEffect(() => {\r\n        const getAllUploadData = async () => {\r\n            await axios.get(`${BaseURL}/upload/public/p?page=1&limit=${LIMIT}`).then((response) => {\r\n                setUploads(response.data.results);\r\n            });\r\n        }\r\n        getAllUploadData();\r\n    }, [])\r\n\r\n    const fetchMoreHoots = async () => {\r\n        await axios.get(`${BaseURL}/upload/public/p?page=${page}&limit=${LIMIT}`)\r\n            .then((response) => {\r\n                const hootsFromServer = response.data.results;\r\n\r\n                setUploads([...uploads, ...hootsFromServer]);\r\n\r\n                if (hootsFromServer === 0 || hootsFromServer < LIMIT) {\r\n                    setHasMore(false);\r\n                }\r\n            });\r\n\r\n        setpage(page + 1);\r\n    }\r\n\r\n    return (\r\n        <div className=\"feed start\" style={{ width: \"100%\" }}>\r\n            {/* no need to reverse the list as it is getting reversed from the server itself  */}\r\n            {uploads &&\r\n                <InfiniteScroll\r\n                    dataLength={uploads.length}\r\n                    next={fetchMoreHoots}\r\n                    hasMore={hasMore}\r\n                    loader={<InfiniteScrollLoader />}\r\n                    endMessage={<EndMsg />}\r\n                >\r\n                    {uploads.map((upload) => {\r\n                        return (<div key={upload.id}>\r\n                            <Post\r\n                                hootId={upload.id}\r\n                                username={upload.authorUsername}\r\n                                mimeType={upload.mimeType}\r\n                                hootImgId={upload.image}\r\n                                audioPoster={upload.audioPoster}\r\n                                likes={upload.likes}\r\n                                views={upload.views}\r\n                                followers={upload.followers}\r\n                                caption={upload.caption}\r\n                                link={upload.link}\r\n                                ephemeral={upload.ephemeral}\r\n                                privateHoot={upload.private}\r\n                                expiryDate={upload.expiryDate}\r\n                                timeStamp={upload.timeStamp}\r\n                                edited={upload.edited}\r\n                                editedTimeStamp={upload.editedTimeStamp}\r\n                            />\r\n                        </div>)\r\n                    })}\r\n                </InfiniteScroll>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Feed\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Feed/Feed.js"],"sourceRoot":""}