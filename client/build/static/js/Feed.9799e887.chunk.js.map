{"version":3,"sources":["../static/js/Feed.9799e887.chunk.js","components/Feed/Feed.js"],"names":["webpackJsonp","8712","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_axios__","__WEBPACK_IMPORTED_MODULE_2_axios___default","__WEBPACK_IMPORTED_MODULE_3__Post__","__WEBPACK_IMPORTED_MODULE_4__EndMsg__","__WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__","__WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__","__WEBPACK_IMPORTED_MODULE_7__feed_css__","_this","_slicedToArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","push","TypeError","Feed","useState","uploads","setUploads","hasMore","setHasMore","page","setpage","BaseURL","process","useEffect","getAllUploadData","a","axios","get","response","data","results","fetchMoreHoots","hootsFromServer","className","style","width","dataLength","loader","endMessage","map","upload","isSensitive","fontFamilyStyle","includes","JSON","parse","fontFamily","fontStyleSize","fontSize","fontColor","color","id","hootId","username","authorUsername","mimeType","hootImgId","image","audioPoster","likes","views","followers","caption","link","ephemeral","privateHoot","private","expiryDate","timeStamp","edited","editedTimeStamp","sensitivity"],"mappings":"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","file":"static/js/Feed.9799e887.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 8712:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Post__ = __webpack_require__(241);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__EndMsg__ = __webpack_require__(786);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__ = __webpack_require__(144);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__ = __webpack_require__(242);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feed_css__ = __webpack_require__(782);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feed_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__feed_css__);\nvar _this=this;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var Feed=function Feed(){var _useState=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])([]),_useState2=_slicedToArray(_useState,2),uploads=_useState2[0],setUploads=_useState2[1];var _useState3=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(true),_useState4=_slicedToArray(_useState3,2),hasMore=_useState4[0],setHasMore=_useState4[1];var _useState5=Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useState\"])(2),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var BaseURL=\"https://soapboxapi.megahoot.net\";var LIMIT=10;Object(__WEBPACK_IMPORTED_MODULE_1_react__[\"useEffect\"])(function(){var getAllUploadData=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+\"/upload/public/p?page=1&limit=\"+LIMIT).then(function(response){setUploads(response.data.results);});case 2:case\"end\":return _context.stop();}}},_callee,_this);}));return function getAllUploadData(){return _ref.apply(this,arguments);};}();getAllUploadData();},[]);var fetchMoreHoots=function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(BaseURL+\"/upload/public/p?page=\"+page+\"&limit=\"+LIMIT).then(function(response){var hootsFromServer=response.data.results;setUploads([].concat(_toConsumableArray(uploads),_toConsumableArray(hootsFromServer)));if(hootsFromServer===0||hootsFromServer<LIMIT){setHasMore(false);}});case 2:setpage(page+1);case 3:case\"end\":return _context2.stop();}}},_callee2,_this);}));return function fetchMoreHoots(){return _ref2.apply(this,arguments);};}();return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\",{className:\"feed start\",style:{width:\"100%\"}},uploads&&__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_react_infinite_scroll_component__[\"a\" /* default */],{dataLength:uploads.length,next:fetchMoreHoots,hasMore:hasMore,loader:__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__InfiniteScrollLoader__[\"a\" /* default */],null),endMessage:__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__EndMsg__[\"a\" /* default */],null)},uploads.map(function(upload){var isSensitive=0;if(upload.isSensitive){isSensitive=upload.isSensitive;}var fontFamilyStyle;if(upload.fontFamilyStyle.includes(\"fontFamily\")){fontFamilyStyle=JSON.parse(upload.fontFamilyStyle);var fontFamily=fontFamilyStyle.fontFamily||\"Arial\";var fontStyleSize=fontFamilyStyle.fontSize||\"20px\";var fontColor=fontFamilyStyle.color||\"black\";}else{var fontFamily=upload.fontFamilyStyle||\"Arial\";var fontStyleSize=\"20px\";var fontColor=\"black\";}return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\",{key:upload.id},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__Post__[\"a\" /* default */],{hootId:upload.id,username:upload.authorUsername,mimeType:upload.mimeType,hootImgId:upload.image,audioPoster:upload.audioPoster,likes:upload.likes,views:upload.views,followers:upload.followers,caption:upload.caption,link:upload.link,ephemeral:upload.ephemeral,privateHoot:upload.private,expiryDate:upload.expiryDate,timeStamp:upload.timeStamp,edited:upload.edited,editedTimeStamp:upload.editedTimeStamp,fontFamilyStyle:fontFamily,fontColor:fontColor,fontStyleSize:fontStyleSize,sensitivity:isSensitive}));})));};/* harmony default export */ __webpack_exports__[\"default\"] = (Feed);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/Feed.9799e887.chunk.js","import React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport Post from \"../Post\";\nimport EndMsg from \"./EndMsg\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport InfiniteScrollLoader from \"./InfiniteScrollLoader\";\nimport \"./feed.css\";\n\nconst Feed = () => {\n  const [uploads, setUploads] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  const [page, setpage] = useState(2);\n  const BaseURL = process.env.REACT_APP_API_URL;\n\n  const LIMIT = 10;\n\n  useEffect(() => {\n    const getAllUploadData = async () => {\n      await axios\n        .get(`${BaseURL}/upload/public/p?page=1&limit=${LIMIT}`)\n        .then((response) => {\n          setUploads(response.data.results);\n        });\n    };\n    getAllUploadData();\n  }, []);\n\n  const fetchMoreHoots = async () => {\n    await axios\n      .get(`${BaseURL}/upload/public/p?page=${page}&limit=${LIMIT}`)\n      .then((response) => {\n        const hootsFromServer = response.data.results;\n\n        setUploads([...uploads, ...hootsFromServer]);\n\n        if (hootsFromServer === 0 || hootsFromServer < LIMIT) {\n          setHasMore(false);\n        }\n      });\n\n    setpage(page + 1);\n  };\n\n  return (\n    <div className=\"feed start\" style={{ width: \"100%\" }}>\n      {/* no need to reverse the list as it is getting reversed from the server itself  */}\n      {uploads && (\n        <InfiniteScroll\n          dataLength={uploads.length}\n          next={fetchMoreHoots}\n          hasMore={hasMore}\n          loader={<InfiniteScrollLoader />}\n          endMessage={<EndMsg />}\n        >\n          {uploads.map((upload) => {\n            let isSensitive = 0;\n            if (upload.isSensitive) {\n              isSensitive = upload.isSensitive;\n            }\n            var fontFamilyStyle;\n            if (upload.fontFamilyStyle.includes(\"fontFamily\")) {\n              fontFamilyStyle = JSON.parse(upload.fontFamilyStyle);\n              var fontFamily = fontFamilyStyle.fontFamily || \"Arial\";\n              var fontStyleSize = fontFamilyStyle.fontSize || \"20px\";\n              var fontColor = fontFamilyStyle.color || \"black\";\n            } else {\n              var fontFamily = upload.fontFamilyStyle || \"Arial\";\n              var fontStyleSize = \"20px\";\n              var fontColor = \"black\";\n            }\n            return (\n              <div key={upload.id}>\n                <Post\n                  hootId={upload.id}\n                  username={upload.authorUsername}\n                  mimeType={upload.mimeType}\n                  hootImgId={upload.image}\n                  audioPoster={upload.audioPoster}\n                  likes={upload.likes}\n                  views={upload.views}\n                  followers={upload.followers}\n                  caption={upload.caption}\n                  link={upload.link}\n                  ephemeral={upload.ephemeral}\n                  privateHoot={upload.private}\n                  expiryDate={upload.expiryDate}\n                  timeStamp={upload.timeStamp}\n                  edited={upload.edited}\n                  editedTimeStamp={upload.editedTimeStamp}\n                  fontFamilyStyle={fontFamily}\n                  fontColor={fontColor}\n                  fontStyleSize={fontStyleSize}\n                  sensitivity={isSensitive}\n                />\n              </div>\n            );\n          })}\n        </InfiniteScroll>\n      )}\n    </div>\n  );\n};\n\nexport default Feed;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Feed/Feed.js"],"sourceRoot":""}